buildroot-external-ad
=====================

Buildroot external overlay for Avionic Design Meerkat-based systems. Contains
support for building a root-filesystem including Linux4Tegra binary driver
support.

For l4t compatibility buildroot-2014.05 has to be used as base, as later
buildroot releases contain components (especially Xorg) in newer version than
l4t supports.

Quickstart
==========

Prerequistes: You must install the buildroot requirements as described in the
buildroot manual:
http://buildroot.uclibc.org/downloads/manual/manual.html#requirement

0. Create working-directory

# mkdir -p ~/dev/meerkat
# export WORKING_DIR=~/dev/meerkat

1. Grab buildroot and our overlay

# cd ${WORKING_DIR}
# git clone https://github.com/avionic-design/buildroot-external-ad.git
# git clone git://git.buildroot.net/buildroot
# cd ${WORKING_DIR}/buildroot
# git checkout -b 2014.05 2014.05

2. Prepare build

The following commands describe an out-of-tree build, where the O=...
make argument points to a subdirectory build/meerkat-rootfs in the
buildroot top-level directory.

# cd ${WORKING_DIR}/buildroot
# make BR2_EXTERNAL=../buildroot-external-ad O=build/meerkat-rootfs meerkat-l4t_defconfig

Select devicetree for your baseboard:

# make O=build/meerkat-rootfs menuconfig

Select sub-menu "Kernel", item "Device Tree Source file names".  Here,
enter the baseboard devicetree filename as found in the kernel sources
provided by Avionic Design, for example "tegra124-kein-baseboard" or
"tegra124-tobor".  Exit menuconfig, saving the configuration.

3. Start build

# make O=build/meerkat-rootfs

This generates a kernel zImage, devicetree blob, uImage, and rootfs.

For example, if you are building for the "kein-baseboard" baseboard, the
following output files are generated:
# ls -1 build/meerkat-rootfs/images/
# rootfs.tar
# tegra124-kein-baseboard.dtb
# uImage-tegra124-kein-baseboard
# zImage

Filenames will vary depending on the baseboard chosen in step 2.

uImage-tegra124-kein-baseboard can be loaded by u-boot to boot the kernel.
rootfs.tar contains a root filesystem including Xorg and nvidia L4T drivers.
